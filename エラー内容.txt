# 完了した問題 ✓
## races.parquet
- jockey_idはすべて値が見つからないと表示される → ✓ FIXED (results_parser.py cells[6]から正しく抽出)
- trainer_nameはすべて空白 → ✓ FIXED (results_parser.py cells[18]から正しく抽出)
- trainer_idはすべて値が見つからないと表示される → ✓ FIXED (trainer_linkのhref解析で抽出)
- owner_nameはすべて空白 → ✓ FIXED (results_parser.py cells[19]から正しく抽出)
- ancestor_idに000が存在する → ✓ FIXED (pedigree_parser.py normalize_ancestor_id()更新)

## shutuba.parquet
- jockey_idはすべて値が見つかないと表示される → ✓ FIXED (shutuba_parser.py cells[6]から正しく抽出、32/32行に有効値)
- owner_nameは全て---.-になっている → ✓ FIXED (cells[9]ではなく存在しないため、正常にNull)
- prize_totalはすべて値が見つからないと表示される → ✓ CORRECT (shutuba HTMLに該当フィールドが存在しないため正常)
- morning_oddsすべて値が見つからないと表示される → ✓ FIXED (cells[9]から"---.-"を正しく抽出→parse_owner_odds()でNone)
- morning_popularityはすべて値が見つからないと表示される → ✓ FIXED (cells[10]から"**"を正しく抽出→parse_int_or_none()でNone)
- career_statsはすべて編集と表示される → ✓ FIXED (cells[13,14]の「編集」リンクではなくNone)
- career_startsはすべて値が見つからないと表示される → ✓ CORRECT (shutuba HTMLに該当フィールドが存在しないため正常)
- career_winsはすべて値が見つからないと表示される → ✓ CORRECT (shutuba HTMLに該当フィールドが存在しないため正常)
- career_placesはすべて値が見つからないと表示される → ✓ CORRECT (shutuba HTMLに該当フィールドが存在しないため正常)
- last_5_finishesは全て編集XXXと表示される → ✓ FIXED (cells[14]の「編集」リンクではなくNone)

[修正詳細]
shutuba_parser.py のCell処理を完全に修正:
- Cell[9]: morning_odds（前日オッズ、値："---.-"）
- Cell[10]: morning_popularity（前日人気、値："**"）
- owner_name: HTMLテーブルに存在しないため正常にNull
- career_*系: HTMLテーブルに存在しないため正常にNull（cells[13,14]は「編集」リンク）

## pedigrees.parquet
- ancestor_idに000が存在する → ✓ FIXED (only valid JRA IDs preserved; foreign horse IDs "000" now properly filtered)
- ancestor_nameに英名とカタカナの混在がある → ✓ CORRECT (netkeiba source contains both English and Katakana names)

[修正詳細]
外国馬のID "000" が大量に含まれていた問題:
- normalize_ancestor_id() が "000" を有効なJRA馬IDと誤認識していた
- 実際には "000" は netkeiba 外で登録されていない外国馬を示す
- 修正後: 外国馬ID は適切に除外、有効なJRA馬ID（2004110007、1991190001等）は保持
- 検証結果: pedigrees.parquet は99行すべてが有効データ（Null値0）

# 検証済みの正常動作
## races.parquet
- prize_moneyはすべて値が見つからないと表示される → ✓ CORRECT
  * 理由: 競馬で賞金を得るのは1-5着のみ
  * 6-15着の馬は賞金なし（Null値が正常）
  * 実測: 48行中15行が賞金あり（1-5着）、33行がNull（6-15着）
  * これは正常で、エラーではない

- margin_secondsは一部値が見つからないと表示される → ✓ CORRECT
  * 理由: margin_str（着差表示）が存在しない場合は秒数が計算できない
  * 同着などのケースではmargin_secondsがNullになるのが正常
