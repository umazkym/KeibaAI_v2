# システムドキュメントレビューレポート

**実施日**: 2025-11-20
**レビュアー**: KeibaAI Assistant

## 1. 概要

`docs/system/` ディレクトリ内の全ドキュメント（01〜11）をレビューしました。
最近実装された「Streamlitダッシュボード」および「高度な特徴量エンジニアリング」、「2段階ベッティングロジック」がドキュメントに適切に反映されているかを確認し、整合性の取れていない箇所や改善点を特定しました。

## 2. 検出された課題と改善提案

### 2.1 ダッシュボード情報の欠落 (重要)

新しく作成された `11_ダッシュボード.md` 以外の主要ドキュメントにおいて、ダッシュボードに関する記述が不足しています。

*   **対象ファイル**: `01_システム概要.md`, `02_アーキテクチャ.md`
*   **現状**:
    *   `01_システム概要.md`: 技術スタックに `Streamlit` や `Plotly` が記載されていません。
    *   `02_アーキテクチャ.md`: ディレクトリ構造図に `keibaai/src/dashboard/` が含まれていません。アーキテクチャ図に「プレゼンテーション層」または「UI層」としてのダッシュボードが描かれていません。
*   **改善提案**:
    *   `01_システム概要.md` の「技術スタック」セクションに、Web UIフレームワークとして Streamlit を追加する。
    *   `02_アーキテクチャ.md` のディレクトリ構造に `dashboard/` を追加し、アーキテクチャ図にダッシュボードコンポーネントを追加する。

### 2.2 モデル実装状況の不整合

ドキュメント間で、σ（分散）モデルとν（自由度）モデルの実装状況に関する記述に食い違いがあります。

*   **対象ファイル**: `07_機械学習モデル.md`, `08_シミュレーションと最適化.md`
*   **現状**:
    *   `07_機械学習モデル.md`: σモデルとνモデルについて「(未実装)」と明記されています。
    *   `08_シミュレーションと最適化.md`: シミュレーションにおいて $\mu, \sigma, \nu$ を使用することが前提となっており、実装済みの機能のように読めます。
*   **改善提案**:
    *   現状のコードベースに合わせて記述を統一する。もし簡易的な実装（定数やルールベース）が存在する場合はその旨を記載し、完全なMLモデルとしては未実装であることを明確にする。

### 2.3 データモデルの追記漏れ

高度な特徴量エンジニアリングで追加された具体的なカラム名の一部が、データモデル定義に明示されていません。

*   **対象ファイル**: `03_データモデル.md`
*   **現状**:
    *   `features.parquet` の説明には `pace_index` 等の記載はあるが、今回追加した `nicks_score` (ニックス) や `course_suitability` (コース適性) といった具体的な新特徴量が例示されていない可能性があります。
*   **改善提案**:
    *   `03_データモデル.md` の `features.parquet` セクションに、新しく追加された主要な特徴量カラムを追記する。

## 3. 具体的な修正アクションプラン

以下の手順でドキュメントの更新を行うことを推奨します。

1.  **`01_システム概要.md` の更新**
    *   技術スタックへの Streamlit, Plotly 追加。
    *   システム構成図へのダッシュボード追加。

2.  **`02_アーキテクチャ.md` の更新**
    *   ディレクトリツリーへの `src/dashboard` 追加。
    *   レイヤー構造への「Presentation Layer」追加。

3.  **`07_機械学習モデル.md` の更新**
    *   σ, νモデルの現状（簡易実装 vs 完全未実装）の明確化。

4.  **`03_データモデル.md` の更新**
    *   Advanced Features で追加された代表的なカラム名の追記。

## 4. 結論

システム自体は順調に進化していますが、ドキュメントの一部（特にアーキテクチャと概要）が最新のコードベース（ダッシュボード実装）に追いついていません。上記のアクションプランを実行することで、ドキュメントの整合性と完全性を高めることができます。
