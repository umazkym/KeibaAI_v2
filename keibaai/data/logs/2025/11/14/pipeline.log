2025-11-14 08:43:01,094 - __main__ - INFO - スクレイピングパイプラインを開始します...
2025-11-14 08:43:01,094 - __main__ - INFO - レース情報のスクレイピングを開始...
2025-11-14 08:43:01,094 - src.modules.preparing._requests_utils - INFO - 開催日一覧のスクレイピングを開始します...
2025-11-14 08:43:01,095 - src.modules.preparing._requests_utils - WARNING - scrape_kaisai_dates は現在モック実装です。
2025-11-14 08:43:01,095 - src.modules.preparing._requests_utils - INFO - レースID一覧のスクレイピングを開始します...
2025-11-14 08:43:01,095 - src.modules.preparing._requests_utils - WARNING - scrape_race_id_list は現在、単一の存在するレースIDを返すテスト実装です。
2025-11-14 08:43:07,632 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/race/202305020811
2025-11-14 08:43:07,635 - __main__ - INFO - race HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\race\race_202305020811_20251114T084307+0900_sha256=c90e86f1.html
2025-11-14 08:43:07,646 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/race/202305020811
2025-11-14 08:43:16,991 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://race.netkeiba.com/race/shutuba.html?race_id=202305020811
2025-11-14 08:43:16,993 - __main__ - INFO - shutuba HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T084316+0900_sha256=0bd7bfca.html
2025-11-14 08:43:16,995 - __main__ - INFO - メタデータをデータベースに保存しました: https://race.netkeiba.com/race/shutuba.html?race_id=202305020811
2025-11-14 08:43:16,996 - __main__ - INFO - 出馬表から馬IDを取得...
2025-11-14 08:43:16,996 - root - INFO - 出馬表パース開始: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T084316+0900_sha256=0bd7bfca.html
2025-11-14 08:43:17,465 - root - WARNING - 日付抽出 (Active Partial): 年が欠落しています '5月14日(日)'。年を別途探索します。
2025-11-14 08:43:17,466 - root - INFO - 日付抽出成功 (Active Partial + Year): 2023-05-14
2025-11-14 08:43:17,469 - root - INFO - 出馬表パース完了: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T084316+0900_sha256=0bd7bfca.html (16行)
2025-11-14 08:43:17,470 - __main__ - INFO - 16頭のユニークな馬IDを取得しました。
2025-11-14 08:43:17,470 - __main__ - INFO - 馬関連情報のスクレイピングを開始...
2025-11-14 08:43:26,998 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2017103201
2025-11-14 08:43:26,999 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2017103201_20251114T084326+0900_sha256=4c61b341.html
2025-11-14 08:43:27,002 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2017103201
2025-11-14 08:43:34,271 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2017103201
2025-11-14 08:43:34,272 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2017103201_20251114T084334+0900_sha256=91a91b64.html
2025-11-14 08:43:34,277 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2017103201
2025-11-14 08:43:38,050 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105345
2025-11-14 08:43:38,065 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105345_20251114T084338+0900_sha256=8e430bfe.html
2025-11-14 08:43:38,067 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105345
2025-11-14 08:43:45,549 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105345
2025-11-14 08:43:45,550 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105345_20251114T084345+0900_sha256=4d4ff782.html
2025-11-14 08:43:45,553 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105345
2025-11-14 08:43:53,603 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105355
2025-11-14 08:43:53,605 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105355_20251114T084353+0900_sha256=5b4e2056.html
2025-11-14 08:43:53,608 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105355
2025-11-14 08:43:56,976 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105355
2025-11-14 08:43:56,979 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105355_20251114T084356+0900_sha256=f2d294f1.html
2025-11-14 08:43:56,982 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105355
2025-11-14 08:44:06,044 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018101871
2025-11-14 08:44:06,047 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018101871_20251114T084406+0900_sha256=1c1a9805.html
2025-11-14 08:44:06,056 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018101871
2025-11-14 08:44:09,894 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018101871
2025-11-14 08:44:09,896 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018101871_20251114T084409+0900_sha256=9b619143.html
2025-11-14 08:44:09,911 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018101871
2025-11-14 08:44:12,698 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019104982
2025-11-14 08:44:12,699 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019104982_20251114T084412+0900_sha256=606ec322.html
2025-11-14 08:44:12,715 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019104982
2025-11-14 08:44:21,604 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019104982
2025-11-14 08:44:21,606 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019104982_20251114T084421+0900_sha256=a57f214a.html
2025-11-14 08:44:21,628 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019104982
2025-11-14 08:44:28,458 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105233
2025-11-14 08:44:28,460 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105233_20251114T084428+0900_sha256=17b44423.html
2025-11-14 08:44:28,462 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105233
2025-11-14 08:44:32,375 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105233
2025-11-14 08:44:32,377 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105233_20251114T084432+0900_sha256=afd83162.html
2025-11-14 08:44:32,395 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105233
2025-11-14 08:44:41,031 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105565
2025-11-14 08:44:41,032 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105565_20251114T084441+0900_sha256=70aaeb74.html
2025-11-14 08:44:41,035 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105565
2025-11-14 08:44:46,761 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105565
2025-11-14 08:44:46,764 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105565_20251114T084446+0900_sha256=4c6cf0c2.html
2025-11-14 08:44:46,766 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105565
2025-11-14 08:44:56,613 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2017102294
2025-11-14 08:44:56,615 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2017102294_20251114T084456+0900_sha256=b13fd408.html
2025-11-14 08:44:56,633 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2017102294
2025-11-14 08:45:07,104 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2017102294
2025-11-14 08:45:07,106 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2017102294_20251114T084507+0900_sha256=d12ea532.html
2025-11-14 08:45:07,121 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2017102294
2025-11-14 08:45:16,110 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105213
2025-11-14 08:45:16,112 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105213_20251114T084516+0900_sha256=91680612.html
2025-11-14 08:45:16,125 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105213
2025-11-14 08:45:26,267 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105213
2025-11-14 08:45:26,270 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105213_20251114T084526+0900_sha256=67c42efe.html
2025-11-14 08:45:26,303 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105213
2025-11-14 08:45:33,330 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019104057
2025-11-14 08:45:33,331 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019104057_20251114T084533+0900_sha256=bf3beb90.html
2025-11-14 08:45:33,333 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019104057
2025-11-14 08:45:38,490 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019104057
2025-11-14 08:45:38,492 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019104057_20251114T084538+0900_sha256=10cd9243.html
2025-11-14 08:45:38,494 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019104057
2025-11-14 08:45:45,832 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018104947
2025-11-14 08:45:45,834 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018104947_20251114T084545+0900_sha256=6b459333.html
2025-11-14 08:45:45,853 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018104947
2025-11-14 08:45:51,516 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018104947
2025-11-14 08:45:51,519 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018104947_20251114T084551+0900_sha256=e14e95f0.html
2025-11-14 08:45:51,536 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018104947
2025-11-14 08:45:54,396 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019104740
2025-11-14 08:45:54,398 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019104740_20251114T084554+0900_sha256=8da01f79.html
2025-11-14 08:45:54,400 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019104740
2025-11-14 08:45:59,621 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019104740
2025-11-14 08:45:59,622 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019104740_20251114T084559+0900_sha256=eb1745ad.html
2025-11-14 08:45:59,636 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019104740
2025-11-14 08:46:03,801 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2017110144
2025-11-14 08:46:03,803 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2017110144_20251114T084603+0900_sha256=8c663c5d.html
2025-11-14 08:46:03,806 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2017110144
2025-11-14 08:46:13,567 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2017110144
2025-11-14 08:46:13,569 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2017110144_20251114T084613+0900_sha256=6b039648.html
2025-11-14 08:46:13,572 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2017110144
2025-11-14 08:46:23,286 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105554
2025-11-14 08:46:23,287 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105554_20251114T084623+0900_sha256=9863a8ad.html
2025-11-14 08:46:23,291 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105554
2025-11-14 08:46:27,416 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105554
2025-11-14 08:46:27,418 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105554_20251114T084627+0900_sha256=05bf8b6c.html
2025-11-14 08:46:27,420 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105554
2025-11-14 08:46:32,583 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105020
2025-11-14 08:46:32,585 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105020_20251114T084632+0900_sha256=65a8455f.html
2025-11-14 08:46:32,598 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105020
2025-11-14 08:46:42,831 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105020
2025-11-14 08:46:42,833 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105020_20251114T084642+0900_sha256=60e3da0a.html
2025-11-14 08:46:42,852 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105020
2025-11-14 08:46:46,239 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019103753
2025-11-14 08:46:46,241 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019103753_20251114T084646+0900_sha256=b6b0f3ac.html
2025-11-14 08:46:46,255 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019103753
2025-11-14 08:46:52,159 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019103753
2025-11-14 08:46:52,161 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019103753_20251114T084652+0900_sha256=f394243b.html
2025-11-14 08:46:52,164 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019103753
2025-11-14 08:46:52,170 - __main__ - INFO - 当日バッチ処理（オッズ取得）を開始...
2025-11-14 08:46:52,171 - src.modules.preparing._scrape_jra_odds - INFO - JRAオッズのダミー生成を開始: 202305020811
2025-11-14 08:46:52,174 - src.modules.preparing._scrape_jra_odds - INFO - ダミーオッズデータを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\json\jra_odds\202305020811_snapshot_20251114T084652+0900_sha256=9f1d226b.json
2025-11-14 08:46:52,178 - src.modules.preparing._scrape_jra_odds - INFO - メタデータをデータベースに保存しました: https://www.jra.go.jp/dummy/odds/202305020811
2025-11-14 08:46:52,178 - __main__ - INFO - 当日バッチ処理が完了。
2025-11-14 08:46:52,178 - __main__ - INFO - データベース接続をクローズしました。
2025-11-14 08:46:52,179 - __main__ - INFO - スクレイピングパイプラインが終了しました。
2025-11-14 09:14:54,989 [INFO] root: ロギングが正常に設定されました
2025-11-14 09:14:54,990 [INFO] root: ============================================================
2025-11-14 09:14:54,990 [INFO] root: Keiba AI μモデル学習パイプライン開始
2025-11-14 09:14:54,990 [INFO] root: ============================================================
2025-11-14 09:14:54,990 [INFO] root: 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:14:54,991 [INFO] root: 33個の特徴量をロードしました
2025-11-14 09:14:55,007 [WARNING] root: Parquetファイルが見つかりません: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:14:55,007 [ERROR] root: 期間 2023-05-01 - 2023-05-31 の特徴量データが見つかりません。
2025-11-14 09:15:11,873 [INFO] root: ロギングが正常に設定されました
2025-11-14 09:15:11,873 [INFO] root: ============================================================
2025-11-14 09:15:11,873 [INFO] root: Keiba AI μモデル学習パイプライン開始
2025-11-14 09:15:11,873 [INFO] root: ============================================================
2025-11-14 09:15:11,874 [INFO] root: 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:15:11,874 [INFO] root: 33個の特徴量をロードしました
2025-11-14 09:15:11,889 [WARNING] root: Parquetファイルが見つかりません: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:15:11,890 [ERROR] root: 期間 2023-05-01 - 2023-05-31 の特徴量データが見つかりません。
2025-11-14 09:23:14,704 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:23:14,705 - root - INFO - ============================================================
2025-11-14 09:23:14,705 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:23:14,705 - root - INFO - ============================================================
2025-11-14 09:23:14,705 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:23:14,705 - root - ERROR - 特徴量リスト (feature_names.yaml) が見つかりません: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\feature_names.yaml
2025-11-14 09:28:38,912 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:28:38,913 - root - INFO - ============================================================
2025-11-14 09:28:38,913 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:28:38,913 - root - INFO - ============================================================
2025-11-14 09:28:38,913 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:28:38,914 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:28:38,930 - root - WARNING - Parquetファイルが見つかりません: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:28:38,932 - root - ERROR - 期間 2023-05-01 - 2023-05-31 の特徴量データが見つかりません。
2025-11-14 09:29:53,973 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:29:53,973 - root - INFO - ============================================================
2025-11-14 09:29:53,973 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:29:53,973 - root - INFO - ============================================================
2025-11-14 09:29:53,973 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:29:53,975 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:29:53,982 - root - WARNING - pyarrow.datasetでの読み込みに失敗しました（フォールバック実行）: Error creating dataset. Could not read schema from 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml'. Is this a 'parquet' file?: Could not open Parquet input source 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.
2025-11-14 09:29:54,081 - root - INFO - 読み込み成功 (フォールバック): 14480行 from 5 files
2025-11-14 09:29:54,091 - root - ERROR - 学習に必要な目的変数 ['finish_position', 'finish_time_seconds'] が特徴量データにありません。
2025-11-14 09:31:15,581 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:31:15,581 - root - INFO - ============================================================
2025-11-14 09:31:15,581 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:31:15,581 - root - INFO - ============================================================
2025-11-14 09:31:15,581 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:31:15,582 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:31:15,606 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:31:15,606 - root - ERROR - 学習に必要な目的変数 ['finish_position', 'finish_time_seconds'] が特徴量データにありません。
2025-11-14 09:33:57,283 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:33:57,283 - root - INFO - ============================================================
2025-11-14 09:33:57,284 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:33:57,284 - root - INFO - ============================================================
2025-11-14 09:33:57,284 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:33:57,285 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:33:57,299 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:33:57,305 - root - INFO - レース結果データをロードしました: 256行
2025-11-14 09:33:57,358 - root - INFO - 特徴量とレース結果をマージしました。結果: 231680行
2025-11-14 09:33:57,406 - root - INFO - 欠損値除去後、0行のデータで学習します。
2025-11-14 09:33:57,407 - root - ERROR - 欠損値を除去した結果、学習データが0行になりました。
2025-11-14 09:34:54,144 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:34:54,144 - root - INFO - ============================================================
2025-11-14 09:34:54,144 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:34:54,144 - root - INFO - ============================================================
2025-11-14 09:34:54,144 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:34:54,145 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:34:54,160 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:34:54,165 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:34:54,168 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:34:54,214 - root - INFO - 特徴量とレース結果をマージしました。結果: 231680行
2025-11-14 09:34:54,255 - root - INFO - 欠損値除去後、0行のデータで学習します。
2025-11-14 09:34:54,255 - root - ERROR - 欠損値を除去した結果、学習データが0行になりました。
2025-11-14 09:35:49,623 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:35:49,623 - root - INFO - ============================================================
2025-11-14 09:35:49,623 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:35:49,623 - root - INFO - ============================================================
2025-11-14 09:35:49,623 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:35:49,624 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:35:49,637 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:35:49,643 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:35:49,646 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:35:49,646 - root - INFO - --- Debug: Pre-merge DataFrames ---
2025-11-14 09:35:49,646 - root - INFO - features_df columns: ['race_id', 'horse_id', 'horse_number', 'race_date', 'bracket_number', 'age', 'basis_weight', 'horse_weight', 'horse_weight_change', 'prize_total', 'morning_odds', 'morning_popularity', 'career_stats', 'career_starts', 'career_wins', 'career_places', 'last_5_finishes', 'sex_牝', 'bracket_is_inner', 'bracket_is_middle', 'bracket_is_outer', 'past_1_finish_position_mean', 'past_3_finish_position_mean', 'past_5_finish_position_mean', 'career_win_rate', 'past_1_finish_time_seconds_mean', 'past_3_finish_time_seconds_mean', 'past_5_finish_time_seconds_mean', 'past_1_margin_seconds_mean', 'past_3_margin_seconds_mean', 'past_5_margin_seconds_mean', 'past_1_last_3f_time_mean', 'past_3_last_3f_time_mean', 'past_5_last_3f_time_mean', 'days_since_last_race', 'horse_weight_zscore', 'basis_weight_zscore', 'day', 'year', 'month']
2025-11-14 09:35:49,647 - root - INFO - races_df columns: ['race_id', 'race_date', 'finish_position', 'bracket_number', 'horse_number', 'horse_name', 'horse_id', 'sex_age', 'sex', 'age', 'basis_weight', 'jockey_name', 'jockey_id', 'finish_time_str', 'finish_time_seconds', 'margin_str', 'margin_seconds', 'passing_order', 'last_3f_time', 'win_odds', 'popularity', 'horse_weight', 'horse_weight_change', 'trainer_name', 'trainer_id', 'owner_name', 'prize_money']
2025-11-14 09:35:49,647 - root - INFO - features_df dtypes:
race_id                                    object
horse_id                                   object
horse_number                                int64
race_date                          datetime64[ns]
bracket_number                              int64
age                                         int64
basis_weight                              float64
horse_weight                                int64
horse_weight_change                       float64
prize_total                                object
morning_odds                               object
morning_popularity                         object
career_stats                               object
career_starts                              object
career_wins                                object
career_places                              object
last_5_finishes                            object
sex_牝                                       int32
bracket_is_inner                            int32
bracket_is_middle                           int32
bracket_is_outer                            int32
past_1_finish_position_mean               float64
past_3_finish_position_mean               float64
past_5_finish_position_mean               float64
career_win_rate                           float64
past_1_finish_time_seconds_mean           float64
past_3_finish_time_seconds_mean           float64
past_5_finish_time_seconds_mean           float64
past_1_margin_seconds_mean                float64
past_3_margin_seconds_mean                float64
past_5_margin_seconds_mean                float64
past_1_last_3f_time_mean                  float64
past_3_last_3f_time_mean                  float64
past_5_last_3f_time_mean                  float64
days_since_last_race                      float64
horse_weight_zscore                       float64
basis_weight_zscore                       float64
day                                         int32
year                                       object
month                                      object
dtype: object
2025-11-14 09:35:49,648 - root - INFO - races_df dtypes:
race_id                        object
race_date              datetime64[ns]
finish_position                 int64
bracket_number                  int64
horse_number                    int64
horse_name                     object
horse_id                       object
sex_age                        object
sex                            object
age                             int64
basis_weight                  float64
jockey_name                    object
jockey_id                      object
finish_time_str                object
finish_time_seconds           float64
margin_str                     object
margin_seconds                float64
passing_order                  object
last_3f_time                  float64
win_odds                      float64
popularity                      int64
horse_weight                    int64
horse_weight_change             int64
trainer_name                   object
trainer_id                     object
owner_name                     object
prize_money                   float64
dtype: object
2025-11-14 09:35:49,654 - root - INFO - features_df head:
        race_id    horse_id  horse_number  race_date  bracket_number  age  basis_weight  horse_weight  horse_weight_change prize_total morning_odds morning_popularity career_stats career_starts career_wins career_places last_5_finishes  sex_牝  bracket_is_inner  bracket_is_middle  bracket_is_outer  past_1_finish_position_mean  past_3_finish_position_mean  past_5_finish_position_mean  career_win_rate  past_1_finish_time_seconds_mean  past_3_finish_time_seconds_mean  past_5_finish_time_seconds_mean  past_1_margin_seconds_mean  past_3_margin_seconds_mean  past_5_margin_seconds_mean  past_1_last_3f_time_mean  past_3_last_3f_time_mean  past_5_last_3f_time_mean  days_since_last_race  horse_weight_zscore  basis_weight_zscore  day       year    month
0  202305020811  2017110144             1 2023-05-14               1    6          56.0           482                 -2.0        None         None               None         None          None        None          None            None      1                 1                  0                 0                          2.0                          2.0                          2.0              0.0                             92.2                             92.2                             92.2                        0.04                        0.04                        0.04                      33.6                      33.6                      33.6                   0.0             0.343977                  0.0   14  year=2023  month=5
1  202305020811  2017110144             1 2023-05-14               1    6          56.0           482                 -2.0        None         None               None         None          None        None          None            None      1                 1                  0                 0                         11.0                         11.0                         11.0              0.0                             93.0                             93.0                             93.0                        0.05                        0.05                        0.05                      33.5                      33.5                      33.5                   0.0             0.343977                  0.0   14  year=2023  month=5
2  202305020811  2017110144             1 2023-05-14               1    6          56.0           482                 -2.0        None         None               None         None          None        None          None            None      1                 1                  0                 0                          5.0                          5.0                          5.0              0.0                             92.7                             92.7                             92.7                        0.35                        0.35                        0.35                      33.8                      33.8                      33.8                   0.0             0.343977                  0.0   14  year=2023  month=5
3  202305020811  2017110144             1 2023-05-14               1    6          56.0           482                 -2.0        None         None               None         None          None        None          None            None      1                 1                  0                 0                         14.0                         14.0                         14.0              0.0                             93.0                             93.0                             93.0                        0.04                        0.04                        0.04                      33.9                      33.9                      33.9                   0.0             0.343977                  0.0   14  year=2023  month=5
4  202305020811  2017110144             1 2023-05-14               1    6          56.0           482                 -2.0        None         None               None         None          None        None          None            None      1                 1                  0                 0                          8.0                          8.0                          8.0              0.0                             92.9                             92.9                             92.9                        0.05                        0.05                        0.05                      33.9                      33.9                      33.9                   0.0             0.343977                  0.0   14  year=2023  month=5
2025-11-14 09:35:49,657 - root - INFO - races_df head:
        race_id  race_date  finish_position  bracket_number  horse_number horse_name    horse_id sex_age sex  age  basis_weight jockey_name jockey_id finish_time_str  finish_time_seconds margin_str  margin_seconds passing_order  last_3f_time  win_odds  popularity  horse_weight  horse_weight_change trainer_name trainer_id    owner_name  prize_money
0  202305020811 2023-05-14                1               3             6     ソングライン  2018105355      牝5   牝    5          56.0        戸崎圭太     05386          1:32.2                 92.2                       0.00           8-6          33.2       7.6           4           488                    0           林徹      01163     サンデーレーシング      13349.0
1  202305020811 2023-05-14                2               8            16        ソダシ  2018105233      牝5   牝    5          56.0         レーン     05585          1:32.2                 92.2        アタマ            0.04           2-2          33.6       4.6           3           488                    8         須貝尚介      01105  金子真人ホールディングス       5300.0
2  202305020811 2023-05-14                3               1             2  スターズオンアース  2019104740      牝4   牝    4          56.0        ルメール     05339          1:32.3                 92.3        3/4            0.15           5-3          33.6       2.5           1           484                    0         高柳瑞樹      01118      社台レースホース       3350.0
3  202305020811 2023-05-14                4               7            13     ディヴィーナ  2018104947      牝5   牝    5          56.0        Ｍ．デム     05212          1:32.4                 92.4          1            0.20          13-9          33.1     224.9          15           422                   -2         友道康夫      01061         佐々木主浩       2000.0
4  202305020811 2023-05-14                5               2             3  サウンドビバーチェ  2019104057      牝4   牝    4          56.0        松山弘平     01126          1:32.7                 92.7      1.3/4            0.35           3-5          33.8      27.4           8           494                   -4         高柳大輔      01159          増田雄一       1300.0
2025-11-14 09:35:49,657 - root - INFO - Using merge keys: ['race_id', 'horse_id']
2025-11-14 09:35:49,706 - root - INFO - 特徴量とレース結果をマージしました。結果: 231680行
2025-11-14 09:35:49,747 - root - INFO - 欠損値除去後、0行のデータで学習します。
2025-11-14 09:35:49,747 - root - ERROR - 欠損値を除去した結果、学習データが0行になりました。
2025-11-14 09:37:03,421 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:37:03,421 - root - INFO - ============================================================
2025-11-14 09:37:03,421 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:37:03,421 - root - INFO - ============================================================
2025-11-14 09:37:03,422 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:37:03,422 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:37:03,437 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:37:03,437 - root - INFO - 重複削除前の特徴量データ: 14480行
2025-11-14 09:37:03,440 - root - INFO - 重複削除後の特徴量データ: 16行
2025-11-14 09:37:03,446 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:37:03,448 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:37:03,448 - root - INFO - Using merge keys: ['race_id', 'horse_id']
2025-11-14 09:37:03,450 - root - INFO - 特徴量とレース結果をマージしました。結果: 256行
2025-11-14 09:37:03,451 - root - INFO - 欠損値除去後、0行のデータで学習します。
2025-11-14 09:37:03,451 - root - ERROR - 欠損値を除去した結果、学習データが0行になりました。
2025-11-14 09:38:14,715 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:38:14,715 - root - INFO - ============================================================
2025-11-14 09:38:14,715 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:38:14,715 - root - INFO - ============================================================
2025-11-14 09:38:14,715 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:38:14,718 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:38:14,735 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:38:14,736 - root - INFO - 重複削除前の特徴量データ: 14480行
2025-11-14 09:38:14,738 - root - INFO - 重複削除後の特徴量データ: 16行
2025-11-14 09:38:14,743 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:38:14,746 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:38:14,746 - root - INFO - Using merge keys: ['race_id', 'horse_id']
2025-11-14 09:38:14,747 - root - INFO - 特徴量とレース結果をマージしました。結果: 256行
2025-11-14 09:38:14,748 - root - INFO - 必須カラムの欠損値除去後: 256行
2025-11-14 09:38:14,752 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 09:38:14,753 - root - INFO - μモデルの学習開始...
2025-11-14 09:38:14,753 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 09:38:14,866 - root - INFO - Regressor の学習完了
2025-11-14 09:38:14,867 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 09:38:14,907 - root - INFO - Ranker の学習完了
2025-11-14 09:38:14,917 - root - INFO - μモデルを keibaai\data\models\mu_model_v1 に保存しました
2025-11-14 09:38:14,917 - root - INFO - ============================================================
2025-11-14 09:38:14,917 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v1 に保存されました。
2025-11-14 09:38:14,917 - root - INFO - ============================================================
2025-11-14 09:40:22,944 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:40:22,944 - root - INFO - ============================================================
2025-11-14 09:40:22,944 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:40:22,944 - root - INFO - ============================================================
2025-11-14 09:40:22,944 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:40:22,945 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:40:22,960 - root - INFO - 読み込み成功 (pyarrow.dataset): 14480行 from C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\features\parquet
2025-11-14 09:40:22,962 - root - WARNING - 特徴量データに重複が見つかりました。重複を削除します。（上流の `generate_features` の修正を推奨）
2025-11-14 09:40:22,962 - root - INFO - 重複削除前の特徴量データ: 14480行
2025-11-14 09:40:22,963 - root - INFO - 重複削除後の特徴量データ: 16行
2025-11-14 09:40:22,968 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:40:22,970 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:40:22,970 - root - INFO - Using merge keys: ['race_id', 'horse_id']
2025-11-14 09:40:22,972 - root - INFO - 特徴量とレース結果をマージしました。結果: 256行
2025-11-14 09:40:22,972 - root - INFO - 必須カラムの欠損値除去後: 256行
2025-11-14 09:40:22,976 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 09:40:22,976 - root - INFO - μモデルの学習開始...
2025-11-14 09:40:22,976 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 09:40:23,059 - root - INFO - Regressor の学習完了
2025-11-14 09:40:23,059 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 09:40:23,099 - root - INFO - Ranker の学習完了
2025-11-14 09:40:23,106 - root - INFO - μモデルを keibaai\data\models\mu_model_v1 に保存しました
2025-11-14 09:40:23,106 - root - INFO - ============================================================
2025-11-14 09:40:23,106 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v1 に保存されました。
2025-11-14 09:40:23,107 - root - INFO - ============================================================
2025-11-14 09:53:27,098 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:53:27,098 - root - INFO - ============================================================
2025-11-14 09:53:27,099 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:53:27,099 - root - INFO - ============================================================
2025-11-14 09:53:27,099 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:53:27,100 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:53:27,104 - root - WARNING - pyarrow.datasetでの読み込みに失敗しました（フォールバック実行）: Error creating dataset. Could not read schema from 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml'. Is this a 'parquet' file?: Could not open Parquet input source 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.
2025-11-14 09:53:27,181 - root - INFO - 読み込み成功 (フォールバック): 17630行 from 6 files
2025-11-14 09:53:27,197 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:53:27,199 - root - INFO - 学習期間にフィルタリング後: 256行
2025-11-14 09:53:27,199 - root - INFO - Using merge keys: ['race_id', 'horse_id']
2025-11-14 09:53:27,270 - root - INFO - 特徴量とレース結果をマージしました。結果: 282080行
2025-11-14 09:53:27,337 - root - INFO - 必須カラムの欠損値除去後: 282080行
2025-11-14 09:53:27,526 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 09:53:27,526 - root - INFO - μモデルの学習開始...
2025-11-14 09:53:27,554 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 09:53:27,921 - root - INFO - Regressor の学習完了
2025-11-14 09:53:27,922 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 09:53:28,231 - root - ERROR - μモデルの学習中にエラーが発生しました: Number of rows 282080 exceeds upper limit of 10000 for a query
Traceback (most recent call last):
  File "C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\src\models\train_mu_model.py", line 203, in main
    estimator.train(
  File "C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\src\models\model_train.py", line 84, in train
    self.model_ranker.fit(X_rank, y_rank_sorted, group=group_counts)
  File "C:\Users\zk-ht\AppData\Local\Programs\Python\Python312\Lib\site-packages\lightgbm\sklearn.py", line 1780, in fit
    super().fit(
  File "C:\Users\zk-ht\AppData\Local\Programs\Python\Python312\Lib\site-packages\lightgbm\sklearn.py", line 1049, in fit
    self._Booster = train(
                    ^^^^^^
  File "C:\Users\zk-ht\AppData\Local\Programs\Python\Python312\Lib\site-packages\lightgbm\engine.py", line 297, in train
    booster = Booster(params=params, train_set=train_set)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zk-ht\AppData\Local\Programs\Python\Python312\Lib\site-packages\lightgbm\basic.py", line 3660, in __init__
    _safe_call(
  File "C:\Users\zk-ht\AppData\Local\Programs\Python\Python312\Lib\site-packages\lightgbm\basic.py", line 313, in _safe_call
    raise LightGBMError(_LIB.LGBM_GetLastError().decode("utf-8"))
lightgbm.basic.LightGBMError: Number of rows 282080 exceeds upper limit of 10000 for a query
2025-11-14 09:55:03,116 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 09:55:03,116 - root - INFO - ============================================================
2025-11-14 09:55:03,116 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 09:55:03,116 - root - INFO - ============================================================
2025-11-14 09:55:03,116 - root - INFO - 学習期間: 2023-05-01 - 2023-05-31
2025-11-14 09:55:03,117 - root - INFO - 33個の特徴量をロードしました
2025-11-14 09:55:03,120 - root - WARNING - pyarrow.datasetでの読み込みに失敗しました（フォールバック実行）: Error creating dataset. Could not read schema from 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml'. Is this a 'parquet' file?: Could not open Parquet input source 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.
2025-11-14 09:55:03,188 - root - INFO - 読み込み成功 (フォールバック): 17630行 from 6 files
2025-11-14 09:55:03,204 - root - INFO - 全レース結果データをロードしました: 256行
2025-11-14 09:55:03,208 - root - INFO - 結合キーを文字列に変換し、空白を除去しました。
2025-11-14 09:55:03,211 - root - WARNING - 特徴量データに重複 (17614行) が見つかりました。重複を排除します。
2025-11-14 09:55:03,215 - root - INFO - 特徴量とレース結果をマージしました。結果: 256行
2025-11-14 09:55:03,215 - root - INFO - 必須カラムの欠損値除去後: 256行
2025-11-14 09:55:03,218 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 09:55:03,218 - root - INFO - μモデルの学習開始...
2025-11-14 09:55:03,219 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 09:55:03,301 - root - INFO - Regressor の学習完了
2025-11-14 09:55:03,301 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 09:55:03,344 - root - INFO - Ranker の学習完了
2025-11-14 09:55:03,351 - root - INFO - μモデルを keibaai\data\models\mu_model_v1 に保存しました
2025-11-14 09:55:03,352 - root - INFO - ============================================================
2025-11-14 09:55:03,352 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v1 に保存されました。
2025-11-14 09:55:03,352 - root - INFO - ============================================================
2025-11-14 10:28:14,702 - __main__ - INFO - スクレイピングパイプラインを開始します...
2025-11-14 10:28:14,703 - __main__ - INFO - レース情報のスクレイピングを開始...
2025-11-14 10:28:14,703 - src.modules.preparing._requests_utils - INFO - 開催日一覧のスクレイピングを開始します...
2025-11-14 10:28:14,703 - src.modules.preparing._requests_utils - WARNING - scrape_kaisai_dates は現在モック実装です。
2025-11-14 10:28:14,703 - src.modules.preparing._requests_utils - INFO - レースID一覧のスクレイピングを開始します...
2025-11-14 10:28:14,703 - src.modules.preparing._requests_utils - WARNING - scrape_race_id_list は現在、単一の存在するレースIDを返すテスト実装です。
2025-11-14 10:28:24,625 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/race/202305020811
2025-11-14 10:28:24,627 - __main__ - INFO - race HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\race\race_202305020811_20251114T102824+0900_sha256=c90e86f1.html
2025-11-14 10:28:24,630 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/race/202305020811
2025-11-14 10:28:38,633 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://race.netkeiba.com/race/shutuba.html?race_id=202305020811
2025-11-14 10:28:38,637 - __main__ - INFO - shutuba HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T102838+0900_sha256=0bd7bfca.html
2025-11-14 10:28:38,640 - __main__ - INFO - メタデータをデータベースに保存しました: https://race.netkeiba.com/race/shutuba.html?race_id=202305020811
2025-11-14 10:28:38,640 - __main__ - INFO - 出馬表から馬IDを取得...
2025-11-14 10:28:38,640 - root - INFO - 出馬表パース開始: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T102838+0900_sha256=0bd7bfca.html
2025-11-14 10:28:39,014 - root - WARNING - 日付抽出 (Active Partial): 年が欠落しています '5月14日(日)'。年を別途探索します。
2025-11-14 10:28:39,015 - root - INFO - 日付抽出成功 (Active Partial + Year): 2023-05-14
2025-11-14 10:28:39,019 - root - INFO - 出馬表パース完了: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\shutuba\shutuba_202305020811_20251114T102838+0900_sha256=0bd7bfca.html (16行)
2025-11-14 10:28:39,019 - __main__ - INFO - 16頭のユニークな馬IDを取得しました。
2025-11-14 10:28:39,019 - __main__ - INFO - 馬関連情報のスクレイピングを開始...
2025-11-14 10:28:46,550 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019104740
2025-11-14 10:28:46,552 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019104740_20251114T102846+0900_sha256=2a19b446.html
2025-11-14 10:28:46,570 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019104740
2025-11-14 10:28:56,361 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019104740
2025-11-14 10:28:56,364 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019104740_20251114T102856+0900_sha256=eb1745ad.html
2025-11-14 10:28:56,380 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019104740
2025-11-14 10:29:10,785 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105565
2025-11-14 10:29:10,787 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105565_20251114T102910+0900_sha256=4cbefda8.html
2025-11-14 10:29:10,791 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105565
2025-11-14 10:29:27,938 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105565
2025-11-14 10:29:27,940 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105565_20251114T102927+0900_sha256=4c6cf0c2.html
2025-11-14 10:29:27,956 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105565
2025-11-14 10:29:36,233 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019104982
2025-11-14 10:29:36,235 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019104982_20251114T102936+0900_sha256=f7f95153.html
2025-11-14 10:29:36,238 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019104982
2025-11-14 10:29:45,240 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019104982
2025-11-14 10:29:45,242 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019104982_20251114T102945+0900_sha256=a57f214a.html
2025-11-14 10:29:45,253 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019104982
2025-11-14 10:29:57,322 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018101871
2025-11-14 10:29:57,326 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018101871_20251114T102957+0900_sha256=8ec00ba1.html
2025-11-14 10:29:57,341 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018101871
2025-11-14 10:30:06,723 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018101871
2025-11-14 10:30:06,726 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018101871_20251114T103006+0900_sha256=9b619143.html
2025-11-14 10:30:06,729 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018101871
2025-11-14 10:30:18,397 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105345
2025-11-14 10:30:18,399 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105345_20251114T103018+0900_sha256=5f65bab1.html
2025-11-14 10:30:18,415 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105345
2025-11-14 10:30:26,765 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105345
2025-11-14 10:30:26,767 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105345_20251114T103026+0900_sha256=4d4ff782.html
2025-11-14 10:30:26,770 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105345
2025-11-14 10:30:34,778 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019105213
2025-11-14 10:30:34,780 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019105213_20251114T103034+0900_sha256=30860cb3.html
2025-11-14 10:30:34,784 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019105213
2025-11-14 10:30:42,537 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019105213
2025-11-14 10:30:42,539 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019105213_20251114T103042+0900_sha256=67c42efe.html
2025-11-14 10:30:42,543 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019105213
2025-11-14 10:30:55,589 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2019103753
2025-11-14 10:30:55,591 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2019103753_20251114T103055+0900_sha256=661c6f11.html
2025-11-14 10:30:55,595 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2019103753
2025-11-14 10:31:01,693 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2019103753
2025-11-14 10:31:01,694 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2019103753_20251114T103101+0900_sha256=f394243b.html
2025-11-14 10:31:01,697 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2019103753
2025-11-14 10:31:15,208 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105355
2025-11-14 10:31:15,212 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105355_20251114T103115+0900_sha256=0a044ce9.html
2025-11-14 10:31:15,219 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105355
2025-11-14 10:31:27,160 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105355
2025-11-14 10:31:27,162 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105355_20251114T103127+0900_sha256=f2d294f1.html
2025-11-14 10:31:27,165 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105355
2025-11-14 10:31:32,986 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2018105554
2025-11-14 10:31:32,988 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2018105554_20251114T103132+0900_sha256=822841cb.html
2025-11-14 10:31:32,992 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2018105554
2025-11-14 10:31:44,747 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2018105554
2025-11-14 10:31:44,749 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2018105554_20251114T103144+0900_sha256=05bf8b6c.html
2025-11-14 10:31:44,757 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2018105554
2025-11-14 10:31:50,389 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/2017110144
2025-11-14 10:31:50,390 - __main__ - INFO - horse HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\horse\horse_2017110144_20251114T103150+0900_sha256=f819937a.html
2025-11-14 10:31:50,392 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/2017110144
2025-11-14 10:31:55,138 - src.modules.preparing._requests_utils - INFO - Successfully fetched HTML from https://db.netkeiba.com/horse/ped/2017110144
2025-11-14 10:31:55,141 - __main__ - INFO - ped HTMLを保存しました: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\raw\html\ped\ped_2017110144_20251114T103155+0900_sha256=6b039648.html
2025-11-14 10:31:55,151 - __main__ - INFO - メタデータをデータベースに保存しました: https://db.netkeiba.com/horse/ped/2017110144
2025-11-14 10:31:59,559 - __main__ - INFO - データベース接続をクローズしました。
2025-11-14 21:21:52,790 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 21:21:52,790 - root - INFO - ============================================================
2025-11-14 21:21:52,790 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 21:21:52,791 - root - INFO - ============================================================
2025-11-14 21:21:52,791 - root - INFO - 学習期間: 2020-01-01 - 2023-12-31
2025-11-14 21:27:20,022 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 21:27:20,022 - root - INFO - ============================================================
2025-11-14 21:27:20,022 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 21:27:20,022 - root - INFO - ============================================================
2025-11-14 21:27:20,022 - root - INFO - 学習期間: 2020-01-01 - 2023-12-31
2025-11-14 21:27:20,025 - root - INFO - 33個の特徴量をロードしました
2025-11-14 21:27:20,044 - root - WARNING - pyarrow.datasetでの読み込みに失敗しました（フォールバック実行）: Error creating dataset. Could not read schema from 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml'. Is this a 'parquet' file?: Could not open Parquet input source 'C:/Users/zk-ht/Keiba/Keiba_AI_v2/keibaai/data/features/parquet/feature_names.yaml': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.
2025-11-14 21:27:22,152 - root - INFO - 読み込み成功 (フォールバック): 479815行 from 67 files
2025-11-14 21:27:22,486 - root - INFO - 全レース結果データをロードしました: 278098行
2025-11-14 21:27:22,598 - root - INFO - 結合キーを文字列に変換し、空白を除去しました。
2025-11-14 21:27:22,673 - root - WARNING - 特徴量データに重複 (213897行) が見つかりました。重複を排除します。
2025-11-14 21:27:22,889 - root - INFO - 特徴量とレース結果をマージしました。結果: 185523行
2025-11-14 21:27:22,917 - root - INFO - 必須カラムの欠損値除去後: 184040行
2025-11-14 21:27:23,032 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 21:27:23,032 - root - INFO - μモデルの学習開始...
2025-11-14 21:27:23,048 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 21:27:23,515 - root - INFO - Regressor の学習完了
2025-11-14 21:27:23,516 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 21:27:24,103 - root - INFO - Ranker の学習完了
2025-11-14 21:27:24,123 - root - INFO - μモデルを keibaai\data\models\mu_model_v2 に保存しました
2025-11-14 21:27:24,123 - root - INFO - ============================================================
2025-11-14 21:27:24,123 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v2 に保存されました。
2025-11-14 21:27:24,124 - root - INFO - ============================================================
2025-11-14 21:51:35,257 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 21:51:35,258 - root - INFO - ============================================================
2025-11-14 21:51:35,258 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 21:51:35,258 - root - INFO - ============================================================
2025-11-14 21:51:35,258 - root - INFO - 学習期間: 2023-01-01 - 2023-12-31
2025-11-14 21:51:35,259 - root - INFO - 33個の特徴量をロードしました
2025-11-14 21:51:37,297 - root - INFO - 読み込み成功: 587127行 from 80 files
2025-11-14 21:51:37,600 - root - INFO - 全レース結果データをロードしました: 278098行
2025-11-14 21:51:37,686 - root - INFO - 結合キーを文字列に変換し、空白を除去しました。
2025-11-14 21:51:37,724 - root - WARNING - 特徴量データに重複 (178774行) が見つかりました。重複を排除します。
2025-11-14 21:51:37,848 - root - INFO - 特徴量とレース結果をマージしました。結果: 45532行
2025-11-14 21:51:37,856 - root - INFO - 必須カラムの欠損値除去後: 45145行
2025-11-14 21:51:37,892 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 21:51:37,892 - root - INFO - μモデルの学習開始...
2025-11-14 21:51:37,896 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 21:51:38,140 - root - INFO - Regressor の学習完了
2025-11-14 21:51:38,141 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 21:51:38,362 - root - INFO - Ranker の学習完了
2025-11-14 21:51:38,379 - root - INFO - μモデルを keibaai\data\models\mu_model_v3 に保存しました
2025-11-14 21:51:38,379 - root - INFO - ============================================================
2025-11-14 21:51:38,379 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v3 に保存されました。
2025-11-14 21:51:38,380 - root - INFO - ============================================================
2025-11-14 22:22:00,710 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 22:22:00,711 - root - INFO - ============================================================
2025-11-14 22:22:00,711 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 22:22:00,711 - root - INFO - ============================================================
2025-11-14 22:22:00,711 - root - INFO - 学習期間: 2023-01-01 - 2023-12-31
2025-11-14 22:22:00,717 - root - INFO - 33個の特徴量をロードしました
2025-11-14 22:22:03,035 - root - INFO - 読み込み成功: 682699行 from 92 files
2025-11-14 22:22:03,387 - root - INFO - 全レース結果データをロードしました: 278098行
2025-11-14 22:22:03,482 - root - INFO - 結合キーを文字列に変換し、空白を除去しました。
2025-11-14 22:22:03,532 - root - WARNING - 特徴量データに重複 (274346行) が見つかりました。重複を排除します。
2025-11-14 22:22:03,668 - root - INFO - 特徴量とレース結果をマージしました。結果: 45532行
2025-11-14 22:22:03,678 - root - INFO - 必須カラムの欠損値除去後: 45145行
2025-11-14 22:22:03,713 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 22:22:03,713 - root - INFO - μモデルの学習開始...
2025-11-14 22:22:03,719 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 22:22:03,954 - root - INFO - Regressor の学習完了
2025-11-14 22:22:03,954 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 22:22:04,184 - root - INFO - Ranker の学習完了
2025-11-14 22:22:04,204 - root - INFO - μモデルを keibaai\data\models\mu_model_v4 に保存しました
2025-11-14 22:22:04,204 - root - INFO - ============================================================
2025-11-14 22:22:04,204 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v4 に保存されました。
2025-11-14 22:22:04,204 - root - INFO - ============================================================
2025-11-14 22:22:46,643 - root - INFO - ロギングが正常に設定されました。ログファイル: C:\Users\zk-ht\Keiba\Keiba_AI_v2\keibaai\data\logs/2025/11/14/pipeline.log
2025-11-14 22:22:46,644 - root - INFO - ============================================================
2025-11-14 22:22:46,644 - root - INFO - Keiba AI μモデル学習パイプライン開始
2025-11-14 22:22:46,644 - root - INFO - ============================================================
2025-11-14 22:22:46,644 - root - INFO - 学習期間: 2023-01-01 - 2023-12-31
2025-11-14 22:22:46,645 - root - INFO - 33個の特徴量をロードしました
2025-11-14 22:22:48,889 - root - INFO - 読み込み成功: 682699行 from 92 files
2025-11-14 22:22:49,247 - root - INFO - 全レース結果データをロードしました: 278098行
2025-11-14 22:22:49,345 - root - INFO - 結合キーを文字列に変換し、空白を除去しました。
2025-11-14 22:22:49,395 - root - WARNING - 特徴量データに重複 (274346行) が見つかりました。重複を排除します。
2025-11-14 22:22:49,525 - root - INFO - 特徴量とレース結果をマージしました。結果: 45532行
2025-11-14 22:22:49,541 - root - INFO - 必須カラムの欠損値除去後: 45145行
2025-11-14 22:22:49,575 - root - INFO - 特徴量の欠損値を0で補完し、数値型に変換しました。
2025-11-14 22:22:49,575 - root - INFO - μモデルの学習開始...
2025-11-14 22:22:49,580 - root - INFO - Regressor (LGBMRegressor) を 'finish_time_seconds' で学習中...
2025-11-14 22:22:49,799 - root - INFO - Regressor の学習完了
2025-11-14 22:22:49,799 - root - INFO - Ranker (LGBMRanker) を 'finish_position' で学習中...
2025-11-14 22:22:50,004 - root - INFO - Ranker の学習完了
2025-11-14 22:22:50,020 - root - INFO - μモデルを keibaai\data\models\mu_model_v4 に保存しました
2025-11-14 22:22:50,020 - root - INFO - ============================================================
2025-11-14 22:22:50,020 - root - INFO - Keiba AI μモデル学習完了。モデルは keibaai/data/models/mu_model_v4 に保存されました。
2025-11-14 22:22:50,020 - root - INFO - ============================================================
