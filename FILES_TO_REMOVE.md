# KeibaAI_v2 ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ

**ä½œæˆæ—¥**: 2025-11-16
**ç›®çš„**: GitHubãƒªãƒã‚¸ãƒˆãƒªãŠã‚ˆã³ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å‰Šé™¤ã™ã¹ãä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜è¨˜

---

## ğŸ“Š ç¾çŠ¶ã‚µãƒãƒªãƒ¼

- **Gitè¿½è·¡ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ç·æ•°**: 203å€‹
- **Gitè¿½è·¡ä¸­ã®Pythonãƒ•ã‚¡ã‚¤ãƒ«**: 86å€‹
- **ä¸è¦ã¨æ€ã‚ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**: **ç´„80-100å€‹**
- **å‰Šé™¤å¯èƒ½ãªå®¹é‡**: **ç´„20-25 MB**

---

## ğŸ”´ ç¢ºå®Ÿã«å‰Šé™¤ã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGitHubã¨ãƒ­ãƒ¼ã‚«ãƒ«ä¸¡æ–¹ã‹ã‚‰ï¼‰

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆkeibaai/data/é…ä¸‹ï¼‰- åˆè¨ˆ53å€‹

#### âŒ Parquetãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç‰¹å¾´é‡ãƒ‡ãƒ¼ã‚¿ï¼‰- 6å€‹
```
keibaai/data/features/parquet/year=2023/month=5/01ae3ea71ebf4b268f9c885d66de6ca2-0.parquet
keibaai/data/features/parquet/year=2023/month=5/049d0348fad442c99c47e73d63df73d8-0.parquet
keibaai/data/features/parquet/year=2023/month=5/203879e3a9404fb1834ecad73511b0a2-0.parquet
keibaai/data/features/parquet/year=2023/month=5/207741414ecf4dc689eba1bb29b5ecf5-0.parquet
keibaai/data/features/parquet/year=2023/month=5/29fe37a458f5435b9abf1f595ce8de1f-0.parquet
keibaai/data/features/parquet/year=2023/month=5/2b3df8bad8a14a2bb5345eb201a9be8e-0.parquet
```
**ç†ç”±**: ç”Ÿæˆå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã€‚å†ç”Ÿæˆã™ã¹ãã€‚

#### âŒ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ« - 6å€‹
```
keibaai/data/logs/2025/11/11/parsing.log
keibaai/data/logs/2025/11/11/pipeline.log
keibaai/data/logs/2025/11/12/parsing.log
keibaai/data/logs/2025/11/12/pipeline.log
keibaai/data/logs/2025/11/13/parsing.log
keibaai/data/logs/2025/11/13/pipeline.log
keibaai/data/logs/2025/11/14/parsing.log
keibaai/data/logs/2025/11/14/pipeline.log
```
**ç†ç”±**: ä¸€æ™‚çš„ãªãƒ­ã‚°ã€‚ä¿æŒä¸è¦ã€‚**ã‚µã‚¤ã‚º**: ä¸æ˜ï¼ˆé€šå¸¸æ•°KB-æ•°MBï¼‰

#### âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ« - 1å€‹ï¼ˆ18MBï¼‰
```
keibaai/data/metadata/db.sqlite3
```
**ç†ç”±**: **18MB**ã®å¤§å®¹é‡ã€‚ç”Ÿæˆå¯èƒ½ã€‚ã‚¹ã‚­ãƒ¼ãƒã®ã¿ã‚’SQLãƒ€ãƒ³ãƒ—ã§ä¿å­˜ã™ã¹ãã€‚
**é‡è¦**: ã“ã‚ŒãŒæœ€ã‚‚å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«

#### âŒ ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« - 3å€‹ï¼ˆ175KBï¼‰
```
keibaai/data/models/mu_model_v1/feature_names.json
keibaai/data/models/mu_model_v1/ranker.pkl
keibaai/data/models/mu_model_v1/regressor.pkl
```
**ç†ç”±**: è¨“ç·´æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã€‚å†è¨“ç·´å¯èƒ½ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ä¸è¦ã€‚

#### âŒ JRAã‚ªãƒƒã‚ºJSONãƒ•ã‚¡ã‚¤ãƒ« - ç´„30å€‹
```
keibaai/data/raw/json/jra_odds/.tmp_od1g091u2023010501_snapshot_20251111T102126+09
keibaai/data/raw/json/jra_odds/2023010501_snapshot_20251111T102201+0900_sha256=49bfe8d5.json
keibaai/data/raw/json/jra_odds/2023010501_snapshot_20251111T102255+0900_sha256=c5730716.json
keibaai/data/raw/json/jra_odds/2023010501_snapshot_20251111T102324+0900_sha256=ec3bfcf5.json
keibaai/data/raw/json/jra_odds/2023010501_snapshot_20251111T102358+0900_sha256=a421c741.json
keibaai/data/raw/json/jra_odds/2023010501_snapshot_20251111T102452+0900_sha256=da11d854.json
keibaai/data/raw/json/jra_odds/2023010502_snapshot_20251111T102255+0900_sha256=828fcde1.json
keibaai/data/raw/json/jra_odds/2023010502_snapshot_20251111T102324+0900_sha256=f66fd434.json
keibaai/data/raw/json/jra_odds/2023010502_snapshot_20251111T102358+0900_sha256=06a9edd1.json
keibaai/data/raw/json/jra_odds/2023010502_snapshot_20251111T102452+0900_sha256=a5c112d3.json
... ï¼ˆãã®ä»–ç´„20å€‹ï¼‰
```
**ç†ç”±**: ä¸€æ™‚çš„ãªã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã€‚ç”Ÿãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒä¸è¦ã€‚

---

### 2. ãƒ‡ãƒãƒƒã‚°ãƒ»åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰- ç´„26å€‹

#### âŒ ãƒ‡ãƒãƒƒã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆdebug_*.pyï¼‰- 7å€‹
```
debug_full_pipeline_by_date.py           (21KB)
debug_full_pipeline_comprehensive.py     (23KB)
debug_missing_distance.py                (5.1KB)
debug_parse_from_bins.py                 (6.9KB)
debug_regex_live.py                      (4KB)
debug_scraping_and_parsing.py            (25KB)
```
**ç†ç”±**: ä¸€æ™‚çš„ãªãƒ‡ãƒãƒƒã‚°ç›®çš„ã€‚é–‹ç™ºå®Œäº†å¾Œã¯ä¸è¦ã€‚

#### âŒ åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆanalyze_*.pyï¼‰- 4å€‹
```
analyze_multiple_bins.py                 (13KB)
analyze_output_20231009.py               (3.1KB)
analyze_output_final.py                  (14KB)
analyze_output_simple.py                 (14KB)
```
**ç†ç”±**: ç‰¹å®šæ—¥æ™‚ã®ãƒ‡ãƒ¼ã‚¿åˆ†æã€‚å†åˆ©ç”¨æ€§ä½ã„ã€‚

#### âŒ ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆtest_*.pyï¼‰- 3å€‹
```
test_distance_parser.py                  (5.5KB)
test_distance_parser_v2.py               (3.9KB)
test_regex_patterns.py                   (5.4KB)
```
**ç†ç”±**: ãƒ«ãƒ¼ãƒˆã«é…ç½®ã™ã¹ãã§ãªã„ã€‚keibaai/tests/ã«çµ±åˆã™ã¹ãã€‚

#### âŒ æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆverify_*, validate_*, check_*, inspect_*ï¼‰- 9å€‹
```
verify_output_final.py                   (7.2KB)
validate_new_parquet.py                  (6.8KB)
validate_parquet.py                      (7.1KB)
validate_parsed_data.py                  (8.7KB)
check_bin_files.py                       (2.4KB)
check_features_data.py                   (7.1KB)
check_parsed_data.py                     (9.6KB)
inspect_parquet_data.py                  (2.6KB)
inspect_pedigrees.py                     (1.9KB)
```
**ç†ç”±**: ä¸€éƒ¨ã¯æœ‰ç”¨ã ãŒã€ãƒ«ãƒ¼ãƒˆã«é…ç½®ã™ã¹ãã§ãªã„ã€‚keibaai/scripts/ã«ç§»å‹•ã™ã¹ãã€‚

#### âŒ ãã®ä»–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - 1å€‹
```
apply_distance_parser_fix.sh             (1.1KB)
```
**ç†ç”±**: ä¸€æ™‚çš„ãªä¿®æ­£ç”¨ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚ä¿®æ­£å®Œäº†å¾Œã¯ä¸è¦ã€‚

---

### 3. ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSV/HTML/TXTï¼‰- 3å€‹

```
debug_scraped_data.csv                   (144KB)
debug_race_list.html                     (45KB)
distance_analysis.txt                    (672ãƒã‚¤ãƒˆ)
```
**ç†ç”±**: ãƒ‡ãƒãƒƒã‚°æ™‚ã«ç”Ÿæˆã•ã‚ŒãŸä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€‚ä¿æŒä¸è¦ã€‚

---

### 4. å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª - 2ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆåˆè¨ˆ1MBï¼‰

#### âŒ output_final/ - 4å€‹ï¼ˆ364KBï¼‰
```
output_final/horses.csv                  (162KB)
output_final/horses_performance.csv      (56KB)
output_final/race_results.csv            (102KB)
output_final/shutuba.csv                 (39KB)
```
**ç†ç”±**: ä¸€æ™‚çš„ãªæ¤œè¨¼ç”¨å‡ºåŠ›ã€‚ç”Ÿæˆå¯èƒ½ã€‚

#### âŒ test/test_output/ - 4å€‹ï¼ˆæ¨å®š100-200KBï¼‰
```
test/test_output/horses.csv
test/test_output/horses_performance.csv
test/test_output/races.csv
test/test_output/shutuba.csv
```
**ç†ç”±**: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã®å‡ºåŠ›ã€‚.gitignoreã§é™¤å¤–ã™ã¹ãã€‚

#### âš ï¸ test/*.bin - 5å€‹ï¼ˆæ¨å®š500KBï¼‰
```
test/202001010101.bin
test/2009100502_profile.bin
test/2009100502_perf.bin
test/2009100502.bin
test/202001010102.bin
```
**åˆ¤æ–­ä¿ç•™**: ãƒ†ã‚¹ãƒˆç”¨ã®ã‚µãƒ³ãƒ—ãƒ«HTMLãƒ•ã‚¡ã‚¤ãƒ«ã€‚
- **ä¿æŒã™ã‚‹å ´åˆ**: ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã¨ã—ã¦æœ‰ç”¨ï¼ˆãŸã ã—ã€keibaai/tests/fixtures/ã«ç§»å‹•ï¼‰
- **å‰Šé™¤ã™ã‚‹å ´åˆ**: .binãƒ•ã‚¡ã‚¤ãƒ«ã¯å¤§ãã„å¯èƒ½æ€§ï¼ˆè¦ç¢ºèªï¼‰

---

### 5. é‡è¤‡ãƒ»å†—é•·ãªREADMEãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ«ãƒ¼ãƒˆï¼‰- 16å€‹

```
ANALYSIS_REPORT_LATEST.md
CRITICAL_FIXES_20251116.md
DEBUG_FULL_PIPELINE_README.md
DEBUG_MISSING_DISTANCE_README.md
DEBUG_PARSE_FROM_BINS_README.md
DEBUG_REPORT.md
DEBUG_SCRAPING_ANALYSIS_REPORT.md
DISTANCE_PARSER_FIX.md
FINAL_SUMMARY.md
IMPLEMENTATION_GUIDE.md
MULTIPLE_BINS_README.md
OUTPUT_FINAL_ANALYSIS_REPORT.md
OUTPUT_VERIFICATION_GUIDE.md
PARSER_TEST_README.md
PIPELINE_VERIFICATION_REPORT.md
SCRAPING_GUIDE.md
SPECIFICATION_UPDATE_PROPOSAL.md
```

**ç†ç”±**:
- é–‹ç™ºéç¨‹ã§ä½œæˆã•ã‚ŒãŸä¸€æ™‚çš„ãªãƒ¬ãƒãƒ¼ãƒˆ
- æƒ…å ±ãŒé‡è¤‡ã—ã¦ã„ã‚‹
- CLAUDE.mdã«çµ±åˆæ¸ˆã¿ã®å†…å®¹ãŒå¤šã„

**æ¨å¥¨**:
- é‡è¦ãªæƒ…å ±ã¯ CLAUDE.md ã«çµ±åˆæ¸ˆã¿
- æ­´å²çš„è¨˜éŒ²ã¨ã—ã¦æ®‹ã—ãŸã„å ´åˆã¯ã€`docs/archive/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ç§»å‹•
- å®Œå…¨ã«å‰Šé™¤ã—ã¦ã‚‚å•é¡Œãªã„

---

## ğŸŸ¡ ä¿æŒã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå‰Šé™¤ã—ãªã„ã“ã¨ï¼‰

### âœ… å¿…é ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - 4å€‹
```
CLAUDE.md                                # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Œå…¨ã‚¬ã‚¤ãƒ‰
PROGRESS.md                              # ãƒ‡ãƒ¼ã‚¿å“è³ªè¿½è·¡
schema.md                                # ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
æŒ‡ç¤º.md                                  # æ—¥æœ¬èªä»•æ§˜æ›¸
AIç«¶é¦¬äºˆæ¸¬ãƒ»æœ€é©æŠ•è³‡ã‚·ã‚¹ãƒ†ãƒ  â€” å®Œå…¨ä»•æ§˜æ›¸ï¼ˆè©³ç´°å®Ÿè£…ç‰ˆï¼‰.txt
```

### âœ… Gitè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```
.gitignore
.gitignore.recommended
```

### âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ã‚¢ï¼ˆkeibaai/é…ä¸‹ï¼‰
```
keibaai/src/             # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
keibaai/configs/         # YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
keibaai/tests/           # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆæ­£è¦ã®å ´æ‰€ï¼‰
keibaai/scripts/         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
keibaai/README.md
keibaai/requirements.txt
```

### âœ… YAMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè¨­å®šã®ã¿ï¼‰
```
keibaai/data/features/feature_names.yaml
keibaai/data/features/parquet/feature_names.yaml
```
**ç†ç”±**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æœ‰ç”¨ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªã„ã€‚

---

## ğŸ“‹ å‰Šé™¤æ‰‹é †ï¼ˆæ¨å¥¨ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: GitHubã‹ã‚‰ã®å‰Šé™¤ï¼ˆå±¥æ­´ã‹ã‚‰ã‚‚å®Œå…¨å‰Šé™¤ï¼‰

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’Gitå±¥æ­´ã‹ã‚‰å®Œå…¨å‰Šé™¤ï¼š

```bash
# 1. å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å„ªå…ˆçš„ã«å‰Šé™¤
git rm -r keibaai/data/metadata/db.sqlite3
git rm -r keibaai/data/features/parquet/year=2023/
git rm -r keibaai/data/models/mu_model_v1/
git rm -r keibaai/data/logs/
git rm -r keibaai/data/raw/json/jra_odds/

# 2. å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
git rm -r output_final/
git rm -r test/test_output/

# 3. ãƒ‡ãƒãƒƒã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆãƒ«ãƒ¼ãƒˆï¼‰
git rm debug_*.py
git rm analyze_*.py
git rm test_*.py
git rm verify_*.py validate_*.py check_*.py inspect_*.py
git rm apply_distance_parser_fix.sh

# 4. ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
git rm debug_scraped_data.csv debug_race_list.html distance_analysis.txt

# 5. å†—é•·ãªREADMEãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆé¸æŠçš„ã«å‰Šé™¤ï¼‰
# å®Œå…¨å‰Šé™¤ã™ã‚‹å ´åˆ:
git rm ANALYSIS_REPORT_LATEST.md CRITICAL_FIXES_20251116.md \
       DEBUG_FULL_PIPELINE_README.md DEBUG_MISSING_DISTANCE_README.md \
       DEBUG_PARSE_FROM_BINS_README.md DEBUG_REPORT.md \
       DEBUG_SCRAPING_ANALYSIS_REPORT.md DISTANCE_PARSER_FIX.md \
       FINAL_SUMMARY.md IMPLEMENTATION_GUIDE.md \
       MULTIPLE_BINS_README.md OUTPUT_FINAL_ANALYSIS_REPORT.md \
       OUTPUT_VERIFICATION_GUIDE.md PARSER_TEST_README.md \
       PIPELINE_VERIFICATION_REPORT.md SCRAPING_GUIDE.md \
       SPECIFICATION_UPDATE_PROPOSAL.md

# ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã™ã‚‹å ´åˆ:
mkdir -p docs/archive
git mv ANALYSIS_REPORT_LATEST.md docs/archive/
git mv CRITICAL_FIXES_20251116.md docs/archive/
# ... ä»¥ä¸‹åŒæ§˜

# 6. ã‚³ãƒŸãƒƒãƒˆã¨ãƒ—ãƒƒã‚·ãƒ¥
git commit -m "chore: Remove unnecessary debug files, generated data, and temporary outputs

- Remove 18MB database file (regeneratable)
- Remove parquet features and model files (regeneratable)
- Remove debug/analysis scripts from root
- Remove temporary output directories
- Archive historical documentation to docs/archive/

Total size reduction: ~20-25 MB
Files removed: ~80-100 files"

git push -u origin claude/setup-gitignore-01H7kx8HDmjfCVWHdQURUi7W
```

### ã‚¹ãƒ†ãƒƒãƒ—2: Gitå±¥æ­´ã‹ã‚‰ã®å®Œå…¨å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**æ³¨æ„**: ä»¥ä¸‹ã¯å±¥æ­´æ”¹å¤‰ã«ãªã‚‹ãŸã‚ã€æ…é‡ã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
# BFG Repo-Cleanerã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
# https://rtyley.github.io/bfg-repo-cleaner/

# 1. BFGã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
wget https://repo1.maven.org/maven2/com/madgag/bfg/1.14.0/bfg-1.14.0.jar

# 2. å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤
java -jar bfg-1.14.0.jar --delete-files db.sqlite3
java -jar bfg-1.14.0.jar --delete-folders "{data,output_final,test/test_output}"

# 3. å±¥æ­´ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
git reflog expire --expire=now --all
git gc --prune=now --aggressive

# 4. å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥
git push origin --force --all
```

**ã¾ãŸã¯ git filter-branch ã‚’ä½¿ç”¨:**

```bash
# metadata/db.sqlite3ã‚’å±¥æ­´ã‹ã‚‰å®Œå…¨å‰Šé™¤
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch keibaai/data/metadata/db.sqlite3' \
  --prune-empty --tag-name-filter cat -- --all

# dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“ã‚’å±¥æ­´ã‹ã‚‰å‰Šé™¤
git filter-branch --force --index-filter \
  'git rm -r --cached --ignore-unmatch keibaai/data/features/parquet keibaai/data/logs keibaai/data/models keibaai/data/raw/json' \
  --prune-empty --tag-name-filter cat -- --all

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
git reflog expire --expire=now --all
git gc --prune=now --aggressive

# å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥
git push origin --force --all
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã®å‰Šé™¤

GitHubã‹ã‚‰å‰Šé™¤å¾Œã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ï¼š

```bash
# æ—¢ã«git rmã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã‚‚å‰Šé™¤ã•ã‚Œã‚‹
# è¿½åŠ ã§.gitignoreã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ãŸã„å ´åˆ:

# output_final/ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆ
rm -rf output_final/

# test/test_output/ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆ
rm -rf test/test_output/

# ãã®ä»–ã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«
rm -f debug_scraped_data.csv debug_race_list.html distance_analysis.txt
```

---

## ğŸ¯ å‰Šé™¤å¾Œã®æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

| é …ç›® | Before | After | å‰Šæ¸›é‡ |
|------|--------|-------|--------|
| **Gitè¿½è·¡ãƒ•ã‚¡ã‚¤ãƒ«æ•°** | 203å€‹ | 100-120å€‹ | **80-100å€‹å‰Šæ¸›** |
| **ãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚º** | ç´„25-30 MB | 5-10 MB | **20 MBå‰Šæ¸›** |
| **ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª** | é›‘å¤š | ã‚¯ãƒªãƒ¼ãƒ³ | **å¯èª­æ€§å‘ä¸Š** |
| **data/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª** | 53ãƒ•ã‚¡ã‚¤ãƒ«è¿½è·¡ | 2-3ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ | **50ãƒ•ã‚¡ã‚¤ãƒ«å‰Šæ¸›** |

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ

å‰Šé™¤å‰ã«å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãã ã•ã„ï¼š

```bash
# ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cd /home/user
tar -czf KeibaAI_v2_backup_$(date +%Y%m%d).tar.gz KeibaAI_v2/

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
mkdir -p KeibaAI_v2_backup/data
cp -r KeibaAI_v2/keibaai/data/metadata/db.sqlite3 KeibaAI_v2_backup/data/
cp -r KeibaAI_v2/keibaai/data/models/ KeibaAI_v2_backup/data/
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒä¿å­˜

db.sqlite3ã‚’å‰Šé™¤ã™ã‚‹å‰ã«ã€ã‚¹ã‚­ãƒ¼ãƒã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼š

```bash
sqlite3 keibaai/data/metadata/db.sqlite3 .schema > keibaai/data/metadata/schema.sql
git add keibaai/data/metadata/schema.sql
git commit -m "docs: Export database schema before removing db.sqlite3"
```

### 3. .gitkeepãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

å‰Šé™¤å¾Œã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ä¿æŒï¼š

```bash
# å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«.gitkeepã‚’é…ç½®
touch keibaai/data/metadata/.gitkeep
touch keibaai/data/models/.gitkeep
touch keibaai/data/features/parquet/.gitkeep
touch keibaai/data/logs/.gitkeep
touch keibaai/data/raw/json/jra_odds/.gitkeep

git add keibaai/data/**/.gitkeep
git commit -m "chore: Add .gitkeep files to preserve directory structure"
```

### 4. ãƒãƒ¼ãƒ å…±æœ‰ã®å ´åˆ

ã‚‚ã—ãƒãƒ¼ãƒ ã§é–‹ç™ºã—ã¦ã„ã‚‹å ´åˆã€å±¥æ­´æ”¹å¤‰ã¯å…¨ãƒ¡ãƒ³ãƒãƒ¼ã«å½±éŸ¿ã—ã¾ã™ï¼š

```bash
# ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã‚ã‚Š:
git fetch origin
git reset --hard origin/main  # ã¾ãŸã¯ãƒ–ãƒ©ãƒ³ãƒå
git pull origin main --rebase
```

---

## ğŸ“Š å‰Šé™¤å„ªå…ˆåº¦ãƒªã‚¹ãƒˆ

### ğŸ”´ æœ€å„ªå…ˆï¼ˆå³åº§ã«å‰Šé™¤æ¨å¥¨ï¼‰

1. **keibaai/data/metadata/db.sqlite3** (18MB)
2. **keibaai/data/features/parquet/** (Parquetãƒ•ã‚¡ã‚¤ãƒ«)
3. **keibaai/data/models/mu_model_v1/** (ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«)
4. **output_final/** (364KB)
5. **debug_scraped_data.csv** (144KB)

**å‰Šæ¸›åŠ¹æœ**: ç´„19-20 MB

### ğŸŸ¡ ä¸­å„ªå…ˆï¼ˆæ•´ç†æ¨å¥¨ï¼‰

6. **keibaai/data/logs/** (ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«)
7. **keibaai/data/raw/json/jra_odds/** (JSONãƒ•ã‚¡ã‚¤ãƒ«)
8. **test/test_output/** (ãƒ†ã‚¹ãƒˆå‡ºåŠ›)
9. **ãƒ«ãƒ¼ãƒˆã®debug_*.pyã€analyze_*.py** (ãƒ‡ãƒãƒƒã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆ)

**å‰Šæ¸›åŠ¹æœ**: ç´„2-3 MB

### ğŸŸ¢ ä½å„ªå…ˆï¼ˆä»»æ„ï¼‰

10. **å†—é•·ãªREADME/REPORTãƒ•ã‚¡ã‚¤ãƒ«** (ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¾ãŸã¯å‰Šé™¤)
11. **test/*.bin** (ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã€ç§»å‹•ã‚’æ¤œè¨)

**å‰Šæ¸›åŠ¹æœ**: ç´„1-2 MB

---

## âœ… æœ€çµ‚ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å‰Šé™¤å‰ã«ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ãŸ
- [ ] db.sqlite3ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸ
- [ ] .gitignoreãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] .gitkeepãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ãŸ
- [ ] å‰Šé™¤ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’å†ç¢ºèªã—ãŸ
- [ ] ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆã„ã‚‹å ´åˆï¼‰ã«é€šçŸ¥ã—ãŸ
- [ ] ãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­ã—ã¦ã„ã‚‹ï¼ˆmainãƒ–ãƒ©ãƒ³ãƒã§ã®ç›´æ¥ä½œæ¥­ã‚’é¿ã‘ã‚‹ï¼‰

---

**ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚å®Ÿéš›ã®å‰Šé™¤ã¯ã“ã®å†…å®¹ã‚’ç¢ºèªå¾Œã€æ…é‡ã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚**
